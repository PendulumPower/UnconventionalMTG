<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Set – UnconventionalMTG Archive</title>
    <link rel="stylesheet" href="../../style.css">
</head>

<body>
    <header>
        <h1>Hollow Knight Silksong (HKS)</h1>
        <p>A custom Magic: The Gathering set</p>
    </header>

    <div class="back-button-container">
        <a class="back-button" href="../index.html">← Back to Sets</a>
    </div>

    <main>
        <section class="card-grid" id="card-grid">
            <!-- Cards load automatically -->
        </section>
    </main>

    <footer>
        <p>© 2026 UnconventionalMTG — Created by Pendulum</p>
    </footer>

    <!-- Load cards -->
    <script>
    async function loadCards() {
        try {
            const response = await fetch(`./cards.json`);
            if (!response.ok) throw new Error("Could not load cards.json");
            const data = await response.json();

            const grid = document.getElementById("card-grid");

            data.cards.forEach(card => {
                const img = document.createElement("img");

                img.src = `./Cards/${encodeURIComponent(card.file)}`;
                img.alt = card.file;

                img.onclick = () => {
                    window.location.href = `viewer.html?img=${encodeURIComponent(card.file)}`;
                };

                enableTilt(img);
                grid.appendChild(img);
            });

        } catch (err) {
            console.error("Error loading cards:", err);
        }
    }

    loadCards();
    </script>

    <!-- Tilt + Reflection -->
    <script>
    function enableTilt(img) {
        img.classList.add("card-tilt");

        img.addEventListener("mousemove", (e) => {
            const rect = img.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            const midX = rect.width / 2;
            const midY = rect.height / 2;

            const strength = 15;

            // Correct tilt math
            const rotateY = ((x - midX) / midX) * strength;
            const rotateX = ((midY - y) / midY) * strength;

            img.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.05)`;

            // Reflection highlight
            img.style.setProperty("--mx", `${(x / rect.width) * 100}%`);
            img.style.setProperty("--my", `${(y / rect.height) * 100}%`);
        });

        img.addEventListener("mouseleave", () => {
            img.style.transform = "rotateX(0deg) rotateY(0deg) scale(1)";
            img.style.setProperty("--mx", `50%`);
            img.style.setProperty("--my", `50%`);
        });
    }
    </script>

</body>
</html>
